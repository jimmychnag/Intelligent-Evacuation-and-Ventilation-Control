C51 COMPILER V9.51   AUTODOOR                                                              06/28/2025 16:18:59 PAGE 1   


C51 COMPILER V9.51, COMPILATION OF MODULE AUTODOOR
OBJECT MODULE PLACED IN AutoDoor.obj
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE User\AutoDoor.c BROWSE INCDIR(.\Hardware;.\Library;.\System;.\User) DEBUG O
                    -BJECTEXTEND PRINT(.\AutoDoor.lst) TABS(2) OBJECT(AutoDoor.obj)

line level    source

   1          #include <REGX51.H>
   2          #include "DS18B20.h"
   3          #include "Delay.h"
   4          #include "INT.h"
   5          #include "Timer0_Servo.h"
   6          #include "LCD1602.h"
   7          #include "Uart.h"
   8          
   9          #define LED P0
  10          #define BUZZER P3_4
  11          
  12          bit alarm = 0;
  13          void main()
  14          {
  15   1          DS18B20_ConvertT();
  16   1          delay(60000);
  17   1        
  18   1          INT_Init();
  19   1          Timer0_Init();
  20   1          UART_Init();
  21   1      
  22   1          initial();
  23   1          dis_p(1,1);
  24   1          WriteString("TEMP:");
  25   1          dis_p(2,9);
  26   1          WriteString("Right V");
  27   1          dis_p(2,1);
  28   1          WriteString("Left V");
  29   1          
  30   1          while(1)
  31   1          {
  32   2            UART_Transmit(ton_Servo >> 8);   // 傳送高位
  33   2            UART_Transmit(ton_Servo & 0xFF); // 傳送低位
  34   2            
  35   2            
  36   2            if(alarm == 0)
  37   2            {
  38   3              DS18B20_ConvertT();
  39   3              T = DS18B20_ReadT();
  40   3              WriteFloat(T,1,7);
  41   3            }
  42   2            else
  43   2            {
  44   3              dis_p(1,1);
  45   3              WriteString("                ");
  46   3              dis_p(1,1);
  47   3              WriteString("Fire Alarm");
  48   3            }
  49   2            
  50   2            
  51   2            if(flag1 == 0 && flag2 == 0)     //呼吸窗模式
  52   2            {
  53   3                // 23~28度 對應 1200~2200 ton_Servo
  54   3                ton_Servo = 200*(T)-3400;
C51 COMPILER V9.51   AUTODOOR                                                              06/28/2025 16:18:59 PAGE 2   

  55   3                // 傳送伺服角度高位與低位
  56   3                
  57   3                delay(50000); // 角度更新間隔
  58   3            }
  59   2            else                            //警報模式
  60   2            {
  61   3                ton_Servo = 2200; //警報時全開
  62   3              
  63   3                //警示燈+蜂鳴聲
  64   3                LED = 0x0f;
  65   3                BUZZER = 1;
  66   3                delay(5000);                        
  67   3                LED = 0xf0;
  68   3                BUZZER = 0;
  69   3                delay(5000);
  70   3                
  71   3                if(flag1 == 1)
  72   3                {
  73   4                    dis_p(2,9);
  74   4                    WriteString("Right X");
  75   4                    alarm = 1;
  76   4                }
  77   3                if(flag2 == 1)
  78   3                {
  79   4                    dis_p(2,1);
  80   4                    WriteString("Left X");
  81   4                    alarm = 1;
  82   4                }
  83   3            }
  84   2          }//end while
  85   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    286    ----
   CONSTANT SIZE    =     64    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =      1    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
